
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="..">
      
      
        <link rel="next" href="../advanced/">
      
      <link rel="icon" href="../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.2, mkdocs-material-9.1.6">
    
    
      
        <title>Getting started - API Docs</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.ded33207.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.a0c5b2b5.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="slate" data-md-color-primary="" data-md-color-accent="">
  
    
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#getting-started" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="API Docs" class="md-header__button md-logo" aria-label="API Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            API Docs
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Getting started
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="API Docs" class="md-nav__button md-logo" aria-label="API Docs" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    API Docs
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Getting started
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Getting started
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-commands" class="md-nav__link">
    Simple commands
  </a>
  
    <nav class="md-nav" aria-label="Simple commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-command-example" class="md-nav__link">
    Simple command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-simple-command-example" class="md-nav__link">
    Another simple command example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complex-commands" class="md-nav__link">
    Complex commands
  </a>
  
    <nav class="md-nav" aria-label="Complex commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-command-example" class="md-nav__link">
    Complex command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-complex-command-example" class="md-nav__link">
    Another complex command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yet-another-complex-command-example" class="md-nav__link">
    Yet another complex command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#last-complex-command-example" class="md-nav__link">
    Last complex command example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../advanced/" class="md-nav__link">
        Advanced topics
      </a>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
      
      
      
        <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
          API Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4">
          <span class="md-nav__icon md-icon"></span>
          API Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/" class="md-nav__link">
        API Reference
      </a>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_2" >
      
      
      
        <label class="md-nav__link" for="__nav_4_2" id="__nav_4_2_label" tabindex="0">
          Actions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_2_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_2">
          <span class="md-nav__icon md-icon"></span>
          Actions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/event/" class="md-nav__link">
        Event
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/message/" class="md-nav__link">
        Message
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/navigation/" class="md-nav__link">
        Navigation
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/reminder/" class="md-nav__link">
        Reminder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/responder/" class="md-nav__link">
        Responder
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/shopping/" class="md-nav__link">
        Shopping
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/actions/weather/" class="md-nav__link">
        Weather
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
            
              
  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4_3" >
      
      
      
        <label class="md-nav__link" for="__nav_4_3" id="__nav_4_3_label" tabindex="0">
          Data Types
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="2" aria-labelledby="__nav_4_3_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_4_3">
          <span class="md-nav__icon md-icon"></span>
          Data Types
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/contact/" class="md-nav__link">
        Contact
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/date_time/" class="md-nav__link">
        DateTime
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/event_calendar/" class="md-nav__link">
        EventCalendar
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/event_name/" class="md-nav__link">
        EventName
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/location/" class="md-nav__link">
        Location
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/message_content_type/" class="md-nav__link">
        MessageContentType
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/message_status/" class="md-nav__link">
        MessageStatus
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/nav_road_condition/" class="md-nav__link">
        NavRoadCondition
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/nav_travel_method/" class="md-nav__link">
        NavTravelMethod
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/place_attribute/" class="md-nav__link">
        PlaceAttribute
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/product/" class="md-nav__link">
        Product
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/resource.md" class="md-nav__link">
        Resource
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/weather_attribute/" class="md-nav__link">
        WeatherAttribute
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../reference/types/weather_temperature_unit/" class="md-nav__link">
        WeatherTemperatureUnit
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../exercises/" class="md-nav__link">
        Exercises
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../tests/" class="md-nav__link">
        Tests
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../exercise_writing_tests/" class="md-nav__link">
        Excercise writing tests
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#simple-commands" class="md-nav__link">
    Simple commands
  </a>
  
    <nav class="md-nav" aria-label="Simple commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#simple-command-example" class="md-nav__link">
    Simple command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-simple-command-example" class="md-nav__link">
    Another simple command example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#complex-commands" class="md-nav__link">
    Complex commands
  </a>
  
    <nav class="md-nav" aria-label="Complex commands">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#complex-command-example" class="md-nav__link">
    Complex command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#another-complex-command-example" class="md-nav__link">
    Another complex command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#yet-another-complex-command-example" class="md-nav__link">
    Yet another complex command example
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#last-complex-command-example" class="md-nav__link">
    Last complex command example
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  


<h1 id="getting-started">Getting started</h1>
<p>Let's learn by example.</p>
<p>Throughout this tutorial, we’ll walk you through the creation of a basic Python code for given virtual agent user commands.</p>
<p>We collected user commands for a virtual assistance (like Siri or Alexa). The virtual assistant offers help in navigation, weather forecasts, messaging, reminders, shopping and more. The goal of this project is to match user commands in English to a valid Python code.</p>
<p>We’ll assume you have a basic experience with Python already.</p>
<h2 id="simple-commands">Simple commands</h2>
<p>Simple commands express a single action that the virtual assistant is expected to perform.</p>
<h3 id="simple-command-example">Simple command example</h3>
<p>Let's start by writing a code for a simple user command:</p>
<mark class="critic block">
<p>Get directions from Disneyland to my house.</p>
</mark>
<p>To match this user command we need to map it with the <code>Navigation.find_directions(origin: Optional[Location], destination: Location)</code> function in the <a href="../reference/actions/navigation/">Navigation</a> API.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-0-1" name="__codelineno-0-1" href="#__codelineno-0-1"></a><span class="n">origin</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Disneyland&quot;</span><span class="p">)</span>
<a id="__codelineno-0-2" name="__codelineno-0-2" href="#__codelineno-0-2"></a><span class="n">destination</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;my house&quot;</span><span class="p">)</span>
<a id="__codelineno-0-3" name="__codelineno-0-3" href="#__codelineno-0-3"></a><span class="n">navigation_directions</span> <span class="o">=</span> <span class="n">Navigation</span><span class="o">.</span><span class="n">find_directions</span><span class="p">(</span>
<a id="__codelineno-0-4" name="__codelineno-0-4" href="#__codelineno-0-4"></a>    <span class="n">origin</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span>
<a id="__codelineno-0-5" name="__codelineno-0-5" href="#__codelineno-0-5"></a>    <span class="n">destination</span><span class="o">=</span><span class="n">destination</span>
<a id="__codelineno-0-6" name="__codelineno-0-6" href="#__codelineno-0-6"></a><span class="p">)</span>
<a id="__codelineno-0-7" name="__codelineno-0-7" href="#__codelineno-0-7"></a><span class="n">Responder</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">navigation_directions</span><span class="p">)</span>
</code></pre></div>
<p><code>Navigation.find_directions</code> is taking an origin <code>Location</code> and a destination <code>Location</code> as its parameters.</p>
<p>We first create the origin <code>Location</code> object. We name it according to the argument name <code>origin</code>. A text is usually mapped to a variable using the <code>resolve_from_text()</code> function.</p>
<p>Likewise, we then create the destination <code>Location</code> object and name it with the argument name <code>destination</code>.</p>
<p>Next, we plug the <code>origin</code> and <code>destination</code> parameters into the <code>Navigation.find_directions</code> function call. This function will return a list of navigation directions.</p>
<p>Last, we report back the result to the user using the <code>Responder.respond(response: Entity|List[Entity])</code> API. As the <code>response</code> we set the <code>navigation_directions</code> result from the previous step.</p>
<h3 id="another-simple-command-example">Another simple command example</h3>
<p>Another simple user command:</p>
<mark class="critic block">
<p>Text Karen that I will be late.</p>
</mark>
<p>To match this user command we need to map it with the <code>Messages.send_message(recipient: Contact, content: Content)</code> API in the <a href="../reference/actions/message/">Messaging</a> API.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-1-1" name="__codelineno-1-1" href="#__codelineno-1-1"></a><span class="n">recipient</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Karen&quot;</span><span class="p">)</span>
<a id="__codelineno-1-2" name="__codelineno-1-2" href="#__codelineno-1-2"></a><span class="n">content</span> <span class="o">=</span> <span class="n">Content</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;I will be late&quot;</span><span class="p">)</span>
<a id="__codelineno-1-3" name="__codelineno-1-3" href="#__codelineno-1-3"></a><span class="n">Messages</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<a id="__codelineno-1-4" name="__codelineno-1-4" href="#__codelineno-1-4"></a>    <span class="n">recipient</span><span class="o">=</span><span class="n">recipient</span><span class="p">,</span>
<a id="__codelineno-1-5" name="__codelineno-1-5" href="#__codelineno-1-5"></a>    <span class="n">content</span><span class="o">=</span><span class="n">content</span>
<a id="__codelineno-1-6" name="__codelineno-1-6" href="#__codelineno-1-6"></a><span class="p">)</span>
</code></pre></div>
<p>We first create the <code>Contact</code> object and name it according to the argument name <code>recipient</code>.</p>
<p>Similarly, we create the <code>Content</code> object and name it <code>content</code>.</p>
<p>Next, we plug the <code>recipient</code> and <code>content</code> parameters into the <code>Messages.send_message</code> function call to call the function with its arguments.</p>
<h2 id="complex-commands">Complex commands</h2>
<p>Complex commands can express multiple simple commands together like in sequences or conditions. Alterntaively, complex can call a simple commands multiple times like in loops.</p>
<p>Let's see some examples for complex commands.</p>
<h3 id="complex-command-example">Complex command example</h3>
<p>Complex user command:</p>
<mark class="critic block">
<p>Get directions from Disneyland to my house and text them to Robert.</p>
</mark>
<p>We already went over the first part of the command ("Get directions from Disneyland to my house").</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-2-1" name="__codelineno-2-1" href="#__codelineno-2-1"></a><span class="n">origin</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Disneyland&quot;</span><span class="p">)</span>
<a id="__codelineno-2-2" name="__codelineno-2-2" href="#__codelineno-2-2"></a><span class="n">detination</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;my house&quot;</span><span class="p">)</span>
<a id="__codelineno-2-3" name="__codelineno-2-3" href="#__codelineno-2-3"></a><span class="n">navigation_directions</span> <span class="o">=</span> <span class="n">Navigation</span><span class="o">.</span><span class="n">find_directions</span><span class="p">(</span>
<a id="__codelineno-2-4" name="__codelineno-2-4" href="#__codelineno-2-4"></a>    <span class="n">origin</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span>
<a id="__codelineno-2-5" name="__codelineno-2-5" href="#__codelineno-2-5"></a>    <span class="n">destination</span><span class="o">=</span><span class="n">destination</span>
<a id="__codelineno-2-6" name="__codelineno-2-6" href="#__codelineno-2-6"></a><span class="p">)</span>
</code></pre></div>
<p>Let's see the other part and put the code together. To match "text them to Robert" user command we need to map it with the <code>Messages.send_message</code> API.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-3-1" name="__codelineno-3-1" href="#__codelineno-3-1"></a><span class="n">recipient</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Robert&quot;</span><span class="p">)</span>
<a id="__codelineno-3-2" name="__codelineno-3-2" href="#__codelineno-3-2"></a><span class="n">content</span> <span class="o">=</span> <span class="n">Content</span><span class="o">.</span><span class="n">resolve_from_entity</span><span class="p">(</span><span class="n">navigation_directions</span><span class="p">)</span>
<a id="__codelineno-3-3" name="__codelineno-3-3" href="#__codelineno-3-3"></a><span class="n">Messages</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<a id="__codelineno-3-4" name="__codelineno-3-4" href="#__codelineno-3-4"></a>    <span class="n">recipient</span><span class="o">=</span><span class="n">recipient</span><span class="p">,</span>
<a id="__codelineno-3-5" name="__codelineno-3-5" href="#__codelineno-3-5"></a>    <span class="n">content</span><span class="o">=</span><span class="n">content</span>
<a id="__codelineno-3-6" name="__codelineno-3-6" href="#__codelineno-3-6"></a><span class="p">)</span>
</code></pre></div>
<p>We create the <code>Contact</code> object and name it <code>recipient</code>.</p>
<p>Now we need to create the <code>Content</code> object. Notice that in this example, the content of the message in this example is the navigation directions list we got on the previous step. Therefore, we use the utility function <code>Content.resolve_from_entity()</code> to cast the <code>navigation_direction</code> entity to a <code>Content</code> entity.</p>
<p>Last, we call the <code>Messages.send_message</code> function with its arguments.</p>
<p>The final code should look like this:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-4-1" name="__codelineno-4-1" href="#__codelineno-4-1"></a><span class="n">origin</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Disneyland&quot;</span><span class="p">)</span>
<a id="__codelineno-4-2" name="__codelineno-4-2" href="#__codelineno-4-2"></a><span class="n">destination</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;my house&quot;</span><span class="p">)</span>
<a id="__codelineno-4-3" name="__codelineno-4-3" href="#__codelineno-4-3"></a><span class="n">navigation_direction</span> <span class="o">=</span> <span class="n">Navigation</span><span class="o">.</span><span class="n">find_directions</span><span class="p">(</span>
<a id="__codelineno-4-4" name="__codelineno-4-4" href="#__codelineno-4-4"></a>    <span class="n">origin</span><span class="o">=</span><span class="n">origin</span><span class="p">,</span>
<a id="__codelineno-4-5" name="__codelineno-4-5" href="#__codelineno-4-5"></a>    <span class="n">destination</span><span class="o">=</span><span class="n">destination</span>
<a id="__codelineno-4-6" name="__codelineno-4-6" href="#__codelineno-4-6"></a><span class="p">)</span>
<a id="__codelineno-4-7" name="__codelineno-4-7" href="#__codelineno-4-7"></a>
<a id="__codelineno-4-8" name="__codelineno-4-8" href="#__codelineno-4-8"></a><span class="n">recipient</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Robert&quot;</span><span class="p">)</span>
<a id="__codelineno-4-9" name="__codelineno-4-9" href="#__codelineno-4-9"></a><span class="n">content</span> <span class="o">=</span> <span class="n">Content</span><span class="o">.</span><span class="n">resolve_from_entity</span><span class="p">(</span><span class="n">navigation_direction</span><span class="p">)</span>
<a id="__codelineno-4-10" name="__codelineno-4-10" href="#__codelineno-4-10"></a><span class="n">message</span> <span class="o">=</span> <span class="n">Messages</span><span class="o">.</span><span class="n">send_message</span><span class="p">(</span>
<a id="__codelineno-4-11" name="__codelineno-4-11" href="#__codelineno-4-11"></a>    <span class="n">recipient</span><span class="o">=</span><span class="n">recipient</span><span class="p">,</span>
<a id="__codelineno-4-12" name="__codelineno-4-12" href="#__codelineno-4-12"></a>    <span class="n">content</span><span class="o">=</span><span class="n">content</span>
<a id="__codelineno-4-13" name="__codelineno-4-13" href="#__codelineno-4-13"></a><span class="p">)</span>
</code></pre></div>
<h3 id="another-complex-command-example">Another complex command example</h3>
<p>Let's see another complex user command:</p>
<mark class="critic block">
<p>Remind me to bring an umbrella if it rains tomorrow.</p>
</mark>
<p>The first part of the command: "Remind me to bring an umbrella" is conditioned by the second part of the sentence "if it rains tomorrow".</p>
<p>Conditions are another building blocks of complex commands.</p>
<p>First, we get the weather forecasts by using the <code>Weather.find_weather_forecasts(date_time: Optional[DateTime], weather_attribute: Optional[WeatherAttribute])</code> in the <a href="../reference/actions/weather/">Weather</a> API.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-5-1" name="__codelineno-5-1" href="#__codelineno-5-1"></a><span class="n">date_time</span> <span class="o">=</span> <span class="n">DateTime</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;tomorrow&quot;</span><span class="p">)</span>
<a id="__codelineno-5-2" name="__codelineno-5-2" href="#__codelineno-5-2"></a><span class="n">weather_attribute</span> <span class="o">=</span> <span class="n">WeatherAttribute</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;rains&quot;</span><span class="p">)</span>
<a id="__codelineno-5-3" name="__codelineno-5-3" href="#__codelineno-5-3"></a><span class="n">weather_forecasts</span> <span class="o">=</span> <span class="n">Weather</span><span class="o">.</span><span class="n">find_weather_forecasts</span><span class="p">(</span>
<a id="__codelineno-5-4" name="__codelineno-5-4" href="#__codelineno-5-4"></a>    <span class="n">date_time</span><span class="o">=</span><span class="n">date_time</span><span class="p">,</span>
<a id="__codelineno-5-5" name="__codelineno-5-5" href="#__codelineno-5-5"></a>    <span class="n">weather_attribute</span><span class="o">=</span><span class="n">weather_attribute</span>
<a id="__codelineno-5-6" name="__codelineno-5-6" href="#__codelineno-5-6"></a><span class="p">)</span>
</code></pre></div>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>This API takes additional optional arguments, like a location, which we did not include in this example. In that case, the API assumes default values for the unspecified arguments (like the current location). Don't bother yourself with it and use only what is specified in the example.</p>
<p>Then, we check for the truthness of the condition expression. It will be valid if the <code>Weather.find_weather_forecasts</code> returned any result. This function return a list of weather forecases that match the <code>DateTime</code> and <code>WeatherAttribute</code>.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-6-1" name="__codelineno-6-1" href="#__codelineno-6-1"></a><span class="n">expr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="nb">list</span><span class="p">(</span><span class="n">weather_forecasts</span><span class="p">))</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-6-2" name="__codelineno-6-2" href="#__codelineno-6-2"></a><span class="k">if</span> <span class="n">expr</span><span class="p">:</span>
</code></pre></div>
<p>The condition body should include the "Remind me to bring an umbrella" command.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-7-1" name="__codelineno-7-1" href="#__codelineno-7-1"></a><span class="n">person_reminded</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;me&quot;</span><span class="p">)</span>
<a id="__codelineno-7-2" name="__codelineno-7-2" href="#__codelineno-7-2"></a><span class="n">content</span> <span class="o">=</span> <span class="n">Content</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Bring an umbrella&quot;</span><span class="p">)</span><span class="o">.</span>
<a id="__codelineno-7-3" name="__codelineno-7-3" href="#__codelineno-7-3"></a><span class="n">Reminder</span><span class="o">.</span><span class="n">create_reminder</span><span class="p">(</span>
<a id="__codelineno-7-4" name="__codelineno-7-4" href="#__codelineno-7-4"></a>    <span class="n">person_reminded</span><span class="o">=</span><span class="n">person_reminded</span><span class="p">,</span>
<a id="__codelineno-7-5" name="__codelineno-7-5" href="#__codelineno-7-5"></a>    <span class="n">content</span><span class="o">=</span><span class="n">content</span>
<a id="__codelineno-7-6" name="__codelineno-7-6" href="#__codelineno-7-6"></a><span class="p">)</span>
</code></pre></div>
<p>We follow the <code>Reminder.create_reminder(person_reminded: Optional[Contact], content: Content)</code> API spec.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
</div>
<p>Notice that in the <code>content</code> object we omit the word "to" and keep the content that should appear in the reminder ("bring an umbrella").</p>
<p>Putting everything together:</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-8-1" name="__codelineno-8-1" href="#__codelineno-8-1"></a><span class="n">date_time</span> <span class="o">=</span> <span class="n">DateTime</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;tomorrow&quot;</span><span class="p">)</span>
<a id="__codelineno-8-2" name="__codelineno-8-2" href="#__codelineno-8-2"></a><span class="n">weather_attribute</span> <span class="o">=</span> <span class="n">WeatherAttribute</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;rains&quot;</span><span class="p">)</span>
<a id="__codelineno-8-3" name="__codelineno-8-3" href="#__codelineno-8-3"></a><span class="n">weather_forecasts</span> <span class="o">=</span> <span class="n">Weather</span><span class="o">.</span><span class="n">find_weather_forecasts</span><span class="p">(</span>
<a id="__codelineno-8-4" name="__codelineno-8-4" href="#__codelineno-8-4"></a>    <span class="n">date_time</span><span class="o">=</span><span class="n">date_time</span><span class="p">,</span>
<a id="__codelineno-8-5" name="__codelineno-8-5" href="#__codelineno-8-5"></a>    <span class="n">weather_attribute</span><span class="o">=</span><span class="n">weather_attribute</span>
<a id="__codelineno-8-6" name="__codelineno-8-6" href="#__codelineno-8-6"></a><span class="p">)</span>
<a id="__codelineno-8-7" name="__codelineno-8-7" href="#__codelineno-8-7"></a><span class="n">expr</span> <span class="o">=</span> <span class="nb">len</span><span class="p">(</span><span class="n">weather_forecasts</span><span class="p">)</span> <span class="o">&gt;</span> <span class="mi">0</span>
<a id="__codelineno-8-8" name="__codelineno-8-8" href="#__codelineno-8-8"></a><span class="k">if</span> <span class="n">expr</span><span class="p">:</span>
<a id="__codelineno-8-9" name="__codelineno-8-9" href="#__codelineno-8-9"></a>    <span class="n">person_reminded</span> <span class="o">=</span> <span class="n">Contact</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;me&quot;</span><span class="p">)</span>
<a id="__codelineno-8-10" name="__codelineno-8-10" href="#__codelineno-8-10"></a>    <span class="n">content</span> <span class="o">=</span> <span class="n">Content</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;bring an umbrella&quot;</span><span class="p">)</span>
<a id="__codelineno-8-11" name="__codelineno-8-11" href="#__codelineno-8-11"></a>    <span class="n">reminder</span> <span class="o">=</span> <span class="n">Reminders</span><span class="o">.</span><span class="n">create_reminder</span><span class="p">(</span>
<a id="__codelineno-8-12" name="__codelineno-8-12" href="#__codelineno-8-12"></a>        <span class="n">person_reminded</span><span class="o">=</span><span class="n">person_reminded</span><span class="p">,</span>
<a id="__codelineno-8-13" name="__codelineno-8-13" href="#__codelineno-8-13"></a>        <span class="n">content</span><span class="o">=</span><span class="n">content</span>
<a id="__codelineno-8-14" name="__codelineno-8-14" href="#__codelineno-8-14"></a>    <span class="p">)</span>
</code></pre></div>
<h3 id="yet-another-complex-command-example">Yet another complex command example</h3>
<p>Let's see one more complex user command:</p>
<mark class="critic block">
<p>What is the weather in Paris and London?</p>
</mark>
<p>We will execute this command in a loop iterating over "Paris" and "London", althought it can be executed it in a sequence like previous commands.</p>
<p>Weather forecasts are returned in the <code>Weather.find_weather_forecasts(location: Optional[Location])</code></p>
<p>We are required to report back to the user every result. This is done using <code>Responder.respond(response: Entity | List[Entity])</code>. Since we are looping, we collect all responses in the response <code>list</code> and pass it to the <code>Responder.respond()</code> function.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-9-1" name="__codelineno-9-1" href="#__codelineno-9-1"></a><span class="n">location1</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;Paris&quot;</span><span class="p">)</span>
<a id="__codelineno-9-2" name="__codelineno-9-2" href="#__codelineno-9-2"></a><span class="n">location2</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_from_text</span><span class="p">(</span><span class="s2">&quot;London&quot;</span><span class="p">)</span>
<a id="__codelineno-9-3" name="__codelineno-9-3" href="#__codelineno-9-3"></a><span class="n">response</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-9-4" name="__codelineno-9-4" href="#__codelineno-9-4"></a><span class="k">for</span> <span class="n">location</span> <span class="ow">in</span> <span class="p">[</span><span class="n">location1</span><span class="p">,</span> <span class="n">location2</span><span class="p">]:</span>
<a id="__codelineno-9-5" name="__codelineno-9-5" href="#__codelineno-9-5"></a>    <span class="n">weather_forecasts</span> <span class="o">=</span> <span class="n">Weather</span><span class="o">.</span><span class="n">find_weather_forecasts</span><span class="p">(</span><span class="n">location</span><span class="o">=</span><span class="n">location</span><span class="p">)</span>
<a id="__codelineno-9-6" name="__codelineno-9-6" href="#__codelineno-9-6"></a>    <span class="n">response</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">weather_forecasts</span><span class="p">)</span>
<a id="__codelineno-9-7" name="__codelineno-9-7" href="#__codelineno-9-7"></a><span class="n">Responder</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>
<h3 id="last-complex-command-example">Last complex command example</h3>
<p>We'll finish this part of the tutorial with one last complex user command:</p>
<mark class="critic block">
<p>Show me the traffic to each Whole Food branch in a 10 miles radius.</p>
</mark>
<p>Traffic information is acquired using the <code>Navigation.find_traffic_info(destination: Optional[Location])</code> API in the <a href="../reference/actions/navigation/">Navigation</a> API.</p>
<div class="highlight"><pre><span></span><code><a id="__codelineno-10-1" name="__codelineno-10-1" href="#__codelineno-10-1"></a><span class="n">destinations</span> <span class="o">=</span> <span class="n">Location</span><span class="o">.</span><span class="n">resolve_many_from_text</span><span class="p">(</span><span class="s2">&quot;each Whole Food branch&quot;</span><span class="p">)</span>
<a id="__codelineno-10-2" name="__codelineno-10-2" href="#__codelineno-10-2"></a><span class="n">destinations</span> <span class="o">=</span> <span class="n">utils</span><span class="o">.</span><span class="n">filter</span><span class="p">()</span>
<a id="__codelineno-10-3" name="__codelineno-10-3" href="#__codelineno-10-3"></a><span class="n">response</span> <span class="o">=</span> <span class="p">[]</span>
<a id="__codelineno-10-4" name="__codelineno-10-4" href="#__codelineno-10-4"></a><span class="k">for</span> <span class="n">destination</span> <span class="ow">in</span> <span class="n">destinations</span><span class="p">:</span>
<a id="__codelineno-10-5" name="__codelineno-10-5" href="#__codelineno-10-5"></a>    <span class="n">traffic_info</span> <span class="o">=</span> <span class="n">Navigation</span><span class="o">.</span><span class="n">find_traffic_info</span><span class="p">(</span><span class="n">destination</span><span class="o">=</span><span class="n">destination</span><span class="p">)</span>
<a id="__codelineno-10-6" name="__codelineno-10-6" href="#__codelineno-10-6"></a>    <span class="k">if</span> <span class="n">traffic_info</span><span class="p">:</span>
<a id="__codelineno-10-7" name="__codelineno-10-7" href="#__codelineno-10-7"></a>        <span class="n">response</span><span class="o">.</span><span class="n">append</span><span class="p">(</span><span class="n">traffic_info</span><span class="p">)</span>
<a id="__codelineno-10-8" name="__codelineno-10-8" href="#__codelineno-10-8"></a><span class="n">Responder</span><span class="o">.</span><span class="n">respond</span><span class="p">(</span><span class="n">response</span><span class="o">=</span><span class="n">response</span><span class="p">)</span>
</code></pre></div>
<p>While in previous examples we saw specific location names (e.g. Disneyland, my house), in this example we are looking at a group of locations. The function <code>Location.resolve_many_from_text</code> should be used to return a list of <code>Location</code> objects (like in this case) according to the text argument it is called with.</p>
<p>We get a list of <code>Location</code> using <code>Location.resolve_from_text</code>. The full text describing the location should be provided to it: <code>each Whole Food branch in a 10 miles radius</code>.</p>
<p>Next, we loop over the list of <code>Location</code> from the previous step and find the Navigation traffic information using the <code>Navigation.find_traffic_info()</code>.</p>
<p>We append each traffic info result to a <code>response</code> list and when the loop finishes we call the <code>Responder.respose()</code> with this list.</p>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "..", "features": ["content.code.annotate"], "search": "../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../assets/javascripts/bundle.51198bba.min.js"></script>
      
    
  </body>
</html>